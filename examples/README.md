# üöÄ Z-Library API Examples

–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Z-Library CLI API –¥–ª—è –ø–æ–∏—Å–∫–∞, –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∫–Ω–∏–≥.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
examples/
‚îú‚îÄ‚îÄ python/
‚îÇ   ‚îú‚îÄ‚îÄ search_and_download.py    # –ü–æ–∏—Å–∫ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥
‚îÇ   ‚îî‚îÄ‚îÄ epub_diagnostics.py       # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ EPUB
‚îú‚îÄ‚îÄ run_full_example.py           # –ü–æ–ª–Ω—ã–π workflow
‚îú‚îÄ‚îÄ test_epub_diagnostics.py      # –¢–µ—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
‚îî‚îÄ‚îÄ README.md                     # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. üß™ –¢–µ—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ EPUB (–±–µ–∑ credentials)

–ù–µ —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Z-Library –∞–∫–∫–∞—É–Ω—Ç–∞:

```bash
cd examples
python3 test_epub_diagnostics.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- üèóÔ∏è –°–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ EPUB —Ñ–∞–π–ª—ã (—Ö–æ—Ä–æ—à–∏–π –∏ –ø–ª–æ—Ö–æ–π)
- üìñ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö –∫–∞—á–µ—Å—Ç–≤–æ
- üìä –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

### 2. üîç –ü–æ–∏—Å–∫ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ (—Ç—Ä–µ–±—É–µ—Ç credentials)

```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å credentials –≤ .env —Ñ–∞–π–ª–µ
cd examples/python
python3 search_and_download.py
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- üîç –ò—â–µ—Ç –∫–Ω–∏–≥–∏ –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º
- üìã –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞
- ‚¨áÔ∏è –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–Ω–∏–≥—É –≤ EPUB —Ñ–æ—Ä–º–∞—Ç–µ
- üìÅ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ `downloads/examples/epub_books/`

### 3. üöÄ –ü–æ–ª–Ω—ã–π workflow

```bash
cd examples  
python3 run_full_example.py
```

**–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª:**
1. üîç –ü–æ–∏—Å–∫ –∫–Ω–∏–≥ —á–µ—Ä–µ–∑ JSON API
2. ‚¨áÔ∏è –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–≤–æ–π –Ω–∞–π–¥–µ–Ω–Ω–æ–π –∫–Ω–∏–≥–∏
3. üìñ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ EPUB
4. üìä –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

## üìñ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ EPUB

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:

#### ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
- üì¶ ZIP –∞—Ä—Ö–∏–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- üìÑ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (`mimetype`, `container.xml`)
- üèóÔ∏è OPF –º–∞–Ω–∏—Ñ–µ—Å—Ç –∏ spine
- üîó –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å —Å—Å—ã–ª–æ–∫

#### üìö –°–æ–¥–µ—Ä–∂–∏–º–æ–µ
- üìù HTML/XHTML —Ñ–∞–π–ª—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- üé® CSS —Å—Ç–∏–ª–∏
- üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- üìã –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä, —è–∑—ã–∫)

#### üéØ –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (0-100 –±–∞–ª–ª–æ–≤)
- üü¢ **80-100**: –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- üü° **60-79**: –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ  
- üü† **40-59**: –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–µ
- üî¥ **0-39**: –ü–ª–æ—Ö–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ

### –ü—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞:

```
üìñ –ê–Ω–∞–ª–∏–∑ EPUB: Python_Programming_Guide.epub
==================================================
‚úÖ ZIP —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: 15 —Ñ–∞–π–ª–æ–≤
‚úÖ MIME type: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
‚úÖ Container.xml: OPF —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω
üìö –ù–∞–∑–≤–∞–Ω–∏–µ: Python Programming Guide
üë§ –ê–≤—Ç–æ—Ä: John Doe
üåç –Ø–∑—ã–∫: English
üìã –ú–∞–Ω–∏—Ñ–µ—Å—Ç: 12 —ç–ª–µ–º–µ–Ω—Ç–æ–≤
üìñ Spine: 8 –≥–ª–∞–≤
üìÑ –ö–æ–Ω—Ç–µ–Ω—Ç: 8 HTML, 2 CSS
üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: 5 —Ñ–∞–π–ª–æ–≤
üìä –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 2,450,123 –±–∞–π—Ç (2.3 MB)
üìà –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞: 95/100

üéØ –ö–ê–ß–ï–°–¢–í–û EPUB: üü¢ –û–¢–õ–ò–ß–ù–û–ï (95/100)

üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:
   ‚úÖ EPUB —Ñ–∞–π–ª –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞, –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. Credentials –¥–ª—è Z-Library

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cp env.template .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:
ZLOGIN=your-email@example.com
ZPASSW=your-password
```

### 2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install aiohttp aiofiles
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
cd scripts
./zlib_book_search.sh --json --limits
```

## üîß API Commands

### –ü–æ–∏—Å–∫ –∫–Ω–∏–≥

```bash
# –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫
./zlib_book_search.sh --json "python programming"

# –° —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
./zlib_book_search.sh --json -f epub -l english -c 5 "machine learning"

# –ó–∞–≥—Ä—É–∑–∫–∞
./zlib_book_search.sh --json --download -o downloads "data science"
```

### JSON Response —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

#### –£—Å–ø–µ—à–Ω—ã–π –ø–æ–∏—Å–∫:
```json
{
  "status": "success",
  "query": "python programming",
  "total_results": 10,
  "page": 1,
  "total_pages": 5,
  "results": [
    {
      "id": "123456/abcdef",
      "name": "Python Programming Guide",
      "authors": ["John Doe"],
      "year": "2023",
      "extension": "epub",
      "size": "2.5 MB",
      "rating": "4.5/5.0"
    }
  ]
}
```

#### –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:
```json
{
  "status": "success",
  "message": "Download completed successfully",
  "book": {
    "name": "Python Programming Guide",
    "id": "123456/abcdef",
    "extension": "epub",
    "size_bytes": 2621440
  },
  "file": {
    "path": "./downloads/Python Programming Guide.epub",
    "size": 2621440
  }
}
```

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–∏—Å–∫–æ–º/–∑–∞–≥—Ä—É–∑–∫–æ–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials
./zlib_book_search.sh --json --limits

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python3 -c "import aiohttp, aiofiles; print('OK')"

# –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫
./zlib_book_search.sh --json -c 1 "test"
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å EPUB

```bash
# –¢–µ—Å—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
python3 test_epub_diagnostics.py

# –†—É—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª–∞
python3 python/epub_diagnostics.py /path/to/book.epub
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

```bash
# Verbose —Ä–µ–∂–∏–º
./zlib_book_search.sh -v --json "query"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–≤–µ—Ç–∞
./zlib_book_search.sh --json "test" | jq '.'
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

- üìÅ **–ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**: `downloads/examples/`
- üìñ **EPUB —Ñ–∞–π–ª—ã**: –≥–æ—Ç–æ–≤—ã–µ –∫ —á—Ç–µ–Ω–∏—é
- üìã **–û—Ç—á–µ—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞**: –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
- üéØ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**: —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å —Ñ–∞–π–ª–æ–º

## üîÆ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç—ã

### Python –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```python
import subprocess
import json

def search_books(query):
    result = subprocess.run([
        './zlib_book_search.sh', '--json', query
    ], capture_output=True, text=True)
    
    return json.loads(result.stdout)

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
books = search_books("python programming")
if books["status"] == "success":
    for book in books["results"]:
        print(f"üìö {book['name']}")
```

### Bash –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

```bash
#!/bin/bash
search_and_analyze() {
    local query="$1"
    
    # –ü–æ–∏—Å–∫ –∏ –∑–∞–≥—Ä—É–∑–∫–∞
    result=$(./zlib_book_search.sh --json --download "$query")
    
    # –ò–∑–≤–ª–µ—á—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É
    file_path=$(echo "$result" | jq -r '.file.path')
    
    # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
    if [[ -f "$file_path" ]]; then
        python3 python/epub_diagnostics.py "$file_path"
    fi
}
```

## üéâ Ready to go!

–í—Å–µ –≥–æ—Ç–æ–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞, –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∫–Ω–∏–≥! 

**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**
1. üîß –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env` —Å credentials
2. üß™ –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python3 test_epub_diagnostics.py`
3. üöÄ –ü–æ–ø—Ä–æ–±—É–π—Ç–µ `python3 run_full_example.py`

**Happy reading!** üìö‚ú®